<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
    <link rel="icon" sizes="16x16" href="_static/favicon-16x16.png" type="image/png">
    <link rel="icon" sizes="32x32" href="_static/favicon-32x32.png" type="image/png">
    <link rel="apple-touch-icon" sizes="180x180" href="_static/apple-touch-icon.png" type="image/png">
    <link rel="android-chrome" sizes="192x192" href="_static/android-chrome-192x192.png" type="image/png">
    <link rel="android-chrome" sizes="512x512" href="_static/android-chrome-512x512.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Transforms in 3D &mdash; Spatial Maths package  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"macros": {"presup": ["\\,{}^{\\scriptscriptstyle #1}\\!", 1], "SE": ["\\mathbf{SE}(#1)", 1], "SO": ["\\mathbf{SO}(#1)", 1], "se": ["\\mathbf{se}(#1)", 1], "so": ["\\mathbf{so}(#1)", 1], "vec": ["\\boldsymbol{#1}", 1], "dvec": ["\\dot{\\boldsymbol{#1}}", 1], "ddvec": ["\\ddot{\\boldsymbol{#1}}", 1], "fvec": ["\\presup{#1}\\boldsymbol{#2}", 2], "fdvec": ["\\presup{#1}\\dot{\\boldsymbol{#2}}", 2], "fddvec": ["\\presup{#1}\\ddot{\\boldsymbol{#2}}", 2], "norm": ["\\Vert #1 \\Vert", 1], "mat": ["\\mathbf{#1}", 1], "dmat": ["\\dot{\\mathbf{#1}}", 1], "fmat": ["\\presup{#1}\\mathbf{#2}", 2], "sk": ["\\left[#1\\right]", 1], "skx": ["\\left[#1\\right]_{\\times}", 1], "vex": ["\\vee\\left( #1\\right)", 1], "vexx": ["\\vee_{\\times}\\left( #1\\right)", 1], "q": "\\mathring{q}", "fq": ["\\presup{#1}\\mathring{q}", 1]}}}</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Transforms in ND" href="func_nd.html" />
    <link rel="prev" title="Transforms in 2D" href="func_2d.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Spatial Maths package
              <img src="_static/CartesianSnakes_LogoW.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="spatialmath.html">Class reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="functions.html">Function reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="func_2d.html">Transforms in 2D</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Transforms in 3D</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_nd.html">Transforms in ND</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_quat.html">Quaternions</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_symbolic.html">Symbolic computation</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_vector.html">Vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_graphics.html">Graphics and animation</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_args.html">Argument checking</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_numeric.html">Numerical utility functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="indices.html">Indices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Spatial Maths package</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="functions.html">Function reference</a></li>
      <li class="breadcrumb-item active">Transforms in 3D</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/func_3d.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="func_2d.html" class="btn btn-neutral float-left" title="Transforms in 2D" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="func_nd.html" class="btn btn-neutral float-right" title="Transforms in ND" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-spatialmath.base.transforms3d">
<span id="transforms-in-3d"></span><h1>Transforms in 3D<a class="headerlink" href="#module-spatialmath.base.transforms3d" title="Permalink to this headline">ÔÉÅ</a></h1>
<p>These functions create and manipulate 3D rotation matrices and rigid-body
transformations as 3x3 SO(3) matrices and 4x4 SE(3) matrices respectively.
These matrices are represented as 2D NumPy arrays.</p>
<p>Vector arguments are what numpy refers to as <code class="docutils literal notranslate"><span class="pre">array_like</span></code> and can be a list,
tuple, numpy array, numpy row vector or numpy column vector.</p>
<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.angvec2r">
<span class="sig-name descname"><span class="pre">angvec2r</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#angvec2r"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.angvec2r" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create an SO(3) rotation matrix from rotation angle and axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em>) ‚Äì rotation</p></li>
<li><p><strong>unit</strong> (<em>str</em>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
<li><p><strong>v</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì 3D rotation axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad arguments</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">angvec2r(Œ∏,</span> <span class="pre">V)</span></code> is an SO(3) orthonormal rotation matrix
equivalent to a rotation of <code class="docutils literal notranslate"><span class="pre">Œ∏</span></code> about the vector <code class="docutils literal notranslate"><span class="pre">V</span></code>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">angvec2r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">angvec2r</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>  <span class="c1"># rotx(0.3)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">angvec2r</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>    <span class="c1"># rotx(0)</span>
<span class="go">array([[1., 0., 0.],</span>
<span class="go">       [0., 1., 0.],</span>
<span class="go">       [0., 0., 1.]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">Œ∏</span> <span class="pre">==</span> <span class="pre">0</span></code> then return identity matrix.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">Œ∏</span> <span class="pre">~=</span> <span class="pre">0</span></code> then <code class="docutils literal notranslate"><span class="pre">V</span></code> must have a finite length.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.angvec2tr" title="spatialmath.base.transforms3d.angvec2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">angvec2tr()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.angvec2tr">
<span class="sig-name descname"><span class="pre">angvec2tr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#angvec2tr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.angvec2tr" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create an SE(3) pure rotation from rotation angle and axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em>) ‚Äì rotation</p></li>
<li><p><strong>unit</strong> (<em>str</em>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
<li><p><strong>v</strong> (<em>: array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì 3D rotation axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">angvec2tr(Œ∏,</span> <span class="pre">V)</span></code> is an SE(3) homogeneous transformation matrix
equivalent to a rotation of <code class="docutils literal notranslate"><span class="pre">Œ∏</span></code> about the vector <code class="docutils literal notranslate"><span class="pre">V</span></code>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">angvec2tr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">angvec2tr</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>  <span class="c1"># rtotx(0.3)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955,  0.    ],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">Œ∏</span> <span class="pre">==</span> <span class="pre">0</span></code> then return identity matrix.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">Œ∏</span> <span class="pre">~=</span> <span class="pre">0</span></code> then <code class="docutils literal notranslate"><span class="pre">V</span></code> must have a finite length.</p></li>
<li><p>The translational part is zero.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.angvec2r" title="spatialmath.base.transforms3d.angvec2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">angvec2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.angvelxform">
<span class="sig-name descname"><span class="pre">angvelxform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Œì</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rpy/xyz'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#angvelxform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.angvelxform" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>DEPRECATED, use <a class="reference internal" href="#spatialmath.base.transforms3d.rotvelxform" title="spatialmath.base.transforms3d.rotvelxform"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotvelxform()</span></code></a> instead</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.angvelxform_dot">
<span class="sig-name descname"><span class="pre">angvelxform_dot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Œì</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Œìd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rpy/xyz'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#angvelxform_dot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.angvelxform_dot" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>DEPRECATED, use <a class="reference internal" href="#spatialmath.base.transforms3d.rotvelxform" title="spatialmath.base.transforms3d.rotvelxform"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotvelxform()</span></code></a> instead</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.delta2tr">
<span class="sig-name descname"><span class="pre">delta2tr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#delta2tr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.delta2tr" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Convert differential motion to SE(3)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>Œî</strong> (<em>array_like</em><em>(</em><em>6</em><em>)</em>) ‚Äì differential motion as a 6-vector</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">delta2tr(Œî)</span></code> is an SE(3) matrix representing differential
motion <span class="math notranslate nohighlight">\(\Delta = [\delta_x, \delta_y, \delta_z, \theta_x, \theta_y, \theta_z]\)</span>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">delta2tr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delta2tr</span><span class="p">([</span><span class="mf">0.001</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">array([[ 1.   ,  0.   ,  0.002,  0.001],</span>
<span class="go">       [ 0.   ,  1.   ,  0.   ,  0.   ],</span>
<span class="go">       [-0.002,  0.   ,  1.   ,  0.   ],</span>
<span class="go">       [ 0.   ,  0.   ,  0.   ,  1.   ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><p>Robotics, Vision &amp; Control for Python, Section 3.1, P. Corke, Springer 2023.</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#spatialmath.base.transforms3d.tr2delta" title="spatialmath.base.transforms3d.tr2delta"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2delta()</span></code></a></p>
</dd>
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.eul2jac">
<span class="sig-name descname"><span class="pre">eul2jac</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angles</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#eul2jac"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.eul2jac" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Euler angle rate Jacobian</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>angles</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì Euler angles (œÜ, Œ∏, œà)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Jacobian matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">eul2jac(œÜ,</span> <span class="pre">Œ∏,</span> <span class="pre">œà)</span></code> is a Jacobian matrix (3x3) that maps ZYZ Euler angle
rates to angular velocity at the operating point specified by the Euler
angles œÜ, œ¥, œà.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eul2jac(ùö™)</span></code> as above but the Euler angles are taken from <code class="docutils literal notranslate"><span class="pre">ùö™</span></code> which
is a 3-vector with values (œÜ Œ∏ œà).</p></li>
</ul>
<p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">eul2jac</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2jac</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="go">array([[ 0.    , -0.0998,  0.1977],</span>
<span class="go">       [ 0.    ,  0.995 ,  0.0198],</span>
<span class="go">       [ 1.    ,  0.    ,  0.9801]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Used in the creation of an analytical Jacobian.</p></li>
<li><p>Angles in radians, rates in radians/sec.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><p>Robotics, Vision &amp; Control for Python, Section 8.1.3, P. Corke, Springer 2023.</p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.angvelxform" title="spatialmath.base.transforms3d.angvelxform"><code class="xref py py-func docutils literal notranslate"><span class="pre">angvelxform()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2jac" title="spatialmath.base.transforms3d.rpy2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2jac()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.exp2jac" title="spatialmath.base.transforms3d.exp2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">exp2jac()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.eul2r">
<span class="sig-name descname"><span class="pre">eul2r</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#eul2r"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.eul2r" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create an SO(3) rotation matrix from Euler angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phi</strong> (<em>float</em>) ‚Äì Z-axis rotation</p></li>
<li><p><strong>theta</strong> (<em>float</em>) ‚Äì Y-axis rotation</p></li>
<li><p><strong>psi</strong> (<em>float</em>) ‚Äì Z-axis rotation</p></li>
<li><p><strong>unit</strong> (<em>str</em>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">=</span> <span class="pre">eul2r(œÜ,</span> <span class="pre">Œ∏,</span> <span class="pre">œà)</span></code> is an SO(3) orthonornal rotation
matrix equivalent to the specified Euler angles.  These correspond
to rotations about the Z, Y, Z axes respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">=</span> <span class="pre">eul2r(EUL)</span></code> as above but the Euler angles are taken from
<code class="docutils literal notranslate"><span class="pre">EUL</span></code> which is a 3-vector with values (œÜ Œ∏ œà).</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">eul2r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2r</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9021, -0.3836,  0.1977],</span>
<span class="go">       [ 0.3875,  0.9216,  0.0198],</span>
<span class="go">       [-0.1898,  0.0587,  0.9801]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2r</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="go">array([[ 0.9021, -0.3836,  0.1977],</span>
<span class="go">       [ 0.3875,  0.9216,  0.0198],</span>
<span class="go">       [-0.1898,  0.0587,  0.9801]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2r</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.7146, -0.6131,  0.3368],</span>
<span class="go">       [ 0.6337,  0.7713,  0.0594],</span>
<span class="go">       [-0.2962,  0.171 ,  0.9397]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rpy2r" title="spatialmath.base.transforms3d.rpy2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.eul2tr" title="spatialmath.base.transforms3d.eul2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2tr()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2eul" title="spatialmath.base.transforms3d.tr2eul"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2eul()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.eul2tr">
<span class="sig-name descname"><span class="pre">eul2tr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#eul2tr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.eul2tr" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create an SE(3) pure rotation matrix from Euler angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phi</strong> (<em>float</em>) ‚Äì Z-axis rotation</p></li>
<li><p><strong>theta</strong> (<em>float</em>) ‚Äì Y-axis rotation</p></li>
<li><p><strong>psi</strong> (<em>float</em>) ‚Äì Z-axis rotation</p></li>
<li><p><strong>unit</strong> (<em>str</em>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">=</span> <span class="pre">eul2tr(PHI,</span> <span class="pre">Œ∏,</span> <span class="pre">PSI)</span></code> is an SE(3) homogeneous transformation
matrix equivalent to the specified Euler angles.  These correspond
to rotations about the Z, Y, Z axes respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">=</span> <span class="pre">eul2tr(EUL)</span></code> as above but the Euler angles are taken from
<code class="docutils literal notranslate"><span class="pre">EUL</span></code> which is a 3-vector with values
(PHI Œ∏ PSI).</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">eul2tr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2tr</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9021, -0.3836,  0.1977,  0.    ],</span>
<span class="go">       [ 0.3875,  0.9216,  0.0198,  0.    ],</span>
<span class="go">       [-0.1898,  0.0587,  0.9801,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2tr</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="go">array([[ 0.9021, -0.3836,  0.1977,  0.    ],</span>
<span class="go">       [ 0.3875,  0.9216,  0.0198,  0.    ],</span>
<span class="go">       [-0.1898,  0.0587,  0.9801,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2tr</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.7146, -0.6131,  0.3368,  0.    ],</span>
<span class="go">       [ 0.6337,  0.7713,  0.0594,  0.    ],</span>
<span class="go">       [-0.2962,  0.171 ,  0.9397,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, the translational component is zero but it can be
set to a non-zero value.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rpy2tr" title="spatialmath.base.transforms3d.rpy2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2tr()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.eul2r" title="spatialmath.base.transforms3d.eul2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2eul" title="spatialmath.base.transforms3d.tr2eul"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2eul()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.exp2jac">
<span class="sig-name descname"><span class="pre">exp2jac</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#exp2jac"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.exp2jac" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Jacobian from exponential coordinate rates to angular velocity</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>v</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì Exponential coordinates</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Jacobian matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">exp2jac(v)</span></code> is a Jacobian matrix (3x3) that maps exponential coordinate
rates to angular velocity at the operating point <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">exp2jac</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp2jac</span><span class="p">([</span><span class="mf">0.3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9851, -0.1489],</span>
<span class="go">       [ 0.    ,  0.1489,  0.9851]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Used in the creation of an analytical Jacobian.</p></li>
</ul>
</div>
<p>Reference:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">A</span> <span class="n">compact</span> <span class="n">formula</span> <span class="k">for</span> <span class="n">the</span> <span class="n">derivative</span> <span class="n">of</span> <span class="n">a</span> <span class="mi">3</span><span class="o">-</span><span class="n">D</span> <span class="n">rotation</span> <span class="ow">in</span>
  <span class="n">exponential</span> <span class="n">coordinate</span>
  <span class="n">Guillermo</span> <span class="n">Gallego</span><span class="p">,</span> <span class="n">Anthony</span> <span class="n">Yezzi</span>
  <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">arxiv</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">pdf</span><span class="o">/</span><span class="mf">1312.0788</span><span class="n">v1</span><span class="o">.</span><span class="n">pdf</span>
<span class="o">-</span> <span class="n">Robot</span> <span class="n">Dynamics</span> <span class="n">Lecture</span> <span class="n">Notes</span>
  <span class="n">Robotic</span> <span class="n">Systems</span> <span class="n">Lab</span><span class="p">,</span> <span class="n">ETH</span> <span class="n">Zurich</span><span class="p">,</span> <span class="mi">2018</span>
  <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">ethz</span><span class="o">.</span><span class="n">ch</span><span class="o">/</span><span class="n">content</span><span class="o">/</span><span class="n">dam</span><span class="o">/</span><span class="n">ethz</span><span class="o">/</span><span class="n">special</span><span class="o">-</span><span class="n">interest</span><span class="o">/</span><span class="n">mavt</span><span class="o">/</span><span class="n">robotics</span><span class="o">-</span><span class="n">n</span><span class="o">-</span><span class="n">intelligent</span><span class="o">-</span><span class="n">systems</span><span class="o">/</span><span class="n">rsl</span><span class="o">-</span><span class="n">dam</span><span class="o">/</span><span class="n">documents</span><span class="o">/</span><span class="n">RobotDynamics2018</span><span class="o">/</span><span class="n">RD_HS2018script</span><span class="o">.</span><span class="n">pdf</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rotvelxform" title="spatialmath.base.transforms3d.rotvelxform"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotvelxform()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.eul2jac" title="spatialmath.base.transforms3d.eul2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2jac()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2jac" title="spatialmath.base.transforms3d.rpy2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2jac()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.exp2r">
<span class="sig-name descname"><span class="pre">exp2r</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#exp2r"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.exp2r" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create an SO(3) rotation matrix from exponential coordinates</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>w</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì exponential coordinate vector</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad arguments</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">exp2r(w)</span></code> is an SO(3) orthonormal rotation matrix
equivalent to a rotation of <span class="math notranslate nohighlight">\(\| w \|\)</span> about the vector <span class="math notranslate nohighlight">\(\hat{w}\)</span>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">w</span></code> is zero then result is the identity matrix.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">exp2r</span><span class="p">,</span> <span class="n">rotx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp2r</span><span class="p">([</span><span class="mf">0.3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Exponential coordinates are also known as an Euler vector</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.angvec2r" title="spatialmath.base.transforms3d.angvec2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">angvec2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.exp2tr">
<span class="sig-name descname"><span class="pre">exp2tr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#exp2tr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.exp2tr" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create an SE(3) pure rotation matrix from exponential coordinates</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>w</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì exponential coordinate vector</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad arguments</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">exp2r(w)</span></code> is an SO(3) orthonormal rotation matrix
equivalent to a rotation of <span class="math notranslate nohighlight">\(\| w \|\)</span> about the vector <span class="math notranslate nohighlight">\(\hat{w}\)</span>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">w</span></code> is zero then result is the identity matrix.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">exp2tr</span><span class="p">,</span> <span class="n">trotx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp2tr</span><span class="p">([</span><span class="mf">0.3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955,  0.    ],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955,  0.    ],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Exponential coordinates are also known as an Euler vector</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.angvec2r" title="spatialmath.base.transforms3d.angvec2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">angvec2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.ishom">
<span class="sig-name descname"><span class="pre">ishom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#ishom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.ishom" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Test if matrix belongs to SE(3)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T</strong> (<em>numpy</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) ‚Äì SE(3) matrix to test</p></li>
<li><p><strong>check</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) ‚Äì check validity of rotation submatrix</p></li>
<li><p><strong>tol</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) ‚Äì Tolerance in units of eps for rotation submatrix check, defaults to 100</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>whether matrix is an SE(3) homogeneous transformation matrix</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ishom(T)</span></code> is True if the argument <code class="docutils literal notranslate"><span class="pre">T</span></code> is of dimension 4x4</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ishom(T,</span> <span class="pre">check=True)</span></code> as above, but also checks orthogonality of the
rotation sub-matrix and validitity of the bottom row.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">ishom</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ishom</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span> <span class="c1"># invalid SE(3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ishom</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>  <span class="c1"># a quick check says it is an SE(3)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ishom</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># but if we check more carefully...</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ishom</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="func_nd.html#spatialmath.base.transformsNd.isR" title="spatialmath.base.transformsNd.isR"><code class="xref py py-func docutils literal notranslate"><span class="pre">isR()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.isrot" title="spatialmath.base.transforms3d.isrot"><code class="xref py py-func docutils literal notranslate"><span class="pre">isrot()</span></code></a> <a class="reference internal" href="func_2d.html#spatialmath.base.transforms2d.ishom2" title="spatialmath.base.transforms2d.ishom2"><code class="xref py py-func docutils literal notranslate"><span class="pre">ishom2()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.isrot">
<span class="sig-name descname"><span class="pre">isrot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">R</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#isrot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.isrot" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Test if matrix belongs to SO(3)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>numpy</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) ‚Äì SO(3) matrix to test</p></li>
<li><p><strong>check</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) ‚Äì check validity of rotation submatrix</p></li>
<li><p><strong>tol</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) ‚Äì Tolerance in units of eps for rotation matrix test, defaults to 100</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>whether matrix is an SO(3) rotation matrix</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">isrot(R)</span></code> is True if the argument <code class="docutils literal notranslate"><span class="pre">R</span></code> is of dimension 3x3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isrot(R,</span> <span class="pre">check=True)</span></code> as above, but also checks orthogonality of the
rotation matrix.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">isrot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isrot</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isrot</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span> <span class="o">=</span> <span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span> <span class="c1"># invalid SO(3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isrot</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>  <span class="c1"># a quick check says it is an SO(3)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isrot</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># but if we check more carefully...</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="func_nd.html#spatialmath.base.transformsNd.isR" title="spatialmath.base.transformsNd.isR"><code class="xref py py-func docutils literal notranslate"><span class="pre">isR()</span></code></a> <a class="reference internal" href="func_2d.html#spatialmath.base.transforms2d.isrot2" title="spatialmath.base.transforms2d.isrot2"><code class="xref py py-func docutils literal notranslate"><span class="pre">isrot2()</span></code></a>,  <a class="reference internal" href="#spatialmath.base.transforms3d.ishom" title="spatialmath.base.transforms3d.ishom"><code class="xref py py-func docutils literal notranslate"><span class="pre">ishom()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.oa2r">
<span class="sig-name descname"><span class="pre">oa2r</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#oa2r"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.oa2r" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create SO(3) rotation matrix from two vectors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>o</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì 3D vector parallel to Y- axis</p></li>
<li><p><strong>a</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code>(<code class="docutils literal notranslate"><span class="pre">ScalarType</span></code>, bound= <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.generic" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">generic</span></code></a>, covariant=True)]]]) ‚Äì 3D vector parallel to the Z-axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">oa2tr(O,</span> <span class="pre">A)</span></code> is an SO(3) orthonormal rotation matrix for a frame
defined in terms of vectors parallel to its Y- and Z-axes with respect to a
reference frame.  In robotics these axes are respectively called the
orientation and approach vectors defined such that R = [N O A] and N = O x
A.</p>
<p>Steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>N‚Äô = O x A</p></li>
<li><p>O‚Äô = A x N</p></li>
<li><p>normalize N‚Äô, O‚Äô, A</p></li>
<li><p>stack horizontally into rotation matrix</p></li>
</ol>
</div></blockquote>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">oa2r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oa2r</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># Y := Y, Z := -Z</span>
<span class="go">array([[-1.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  0.],</span>
<span class="go">       [ 0.,  0., -1.]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The A vector is the only guaranteed to have the same direction in the
resulting rotation matrix</p></li>
<li><p>O and A do not have to be unit-length, they are normalized</p></li>
<li><p>O and A do not have to be orthogonal, so long as they are not parallel</p></li>
<li><p>The vectors O and A are parallel to the Y- and Z-axes of the
equivalent coordinate frame.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.oa2tr" title="spatialmath.base.transforms3d.oa2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">oa2tr()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.oa2tr">
<span class="sig-name descname"><span class="pre">oa2tr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#oa2tr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.oa2tr" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create SE(3) pure rotation from two vectors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>o</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì 3D vector parallel to Y- axis</p></li>
<li><p><strong>a</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code>(<code class="docutils literal notranslate"><span class="pre">ScalarType</span></code>, bound= <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.generic" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">generic</span></code></a>, covariant=True)]]]) ‚Äì 3D vector parallel to the Z-axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">oa2tr(O,</span> <span class="pre">A)</span></code> is an SE(3) homogeneous transformation matrix for a
frame defined in terms of vectors parallel to its Y- and Z-axes with respect
to a reference frame.  In robotics these axes are respectively called the
orientation and approach vectors defined such that R = [N O A] and N = O x
A.</p>
<p>Steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>N‚Äô = O x A</p></li>
<li><p>O‚Äô = A x N</p></li>
<li><p>normalize N‚Äô, O‚Äô, A</p></li>
<li><p>stack horizontally into rotation matrix</p></li>
</ol>
</div></blockquote>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">oa2tr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oa2tr</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># Y := Y, Z := -Z</span>
<span class="go">array([[-1.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  0.,  0.],</span>
<span class="go">       [ 0.,  0., -1.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  1.]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.oa2r" title="spatialmath.base.transforms3d.oa2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">oa2r()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.r2x">
<span class="sig-name descname"><span class="pre">r2x</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">R</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rpy/xyz'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#r2x"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.r2x" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Convert SO(3) matrix to angular representation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) ‚Äì SO(3) rotation matrix</p></li>
<li><p><strong>representation</strong> (<em>str</em><em>, </em><em>optional</em>) ‚Äì rotational representation, defaults to ‚Äúrpy/xyz‚Äù</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>angular representation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3)</p>
</dd>
</dl>
<p>Convert an SO(3) rotation matrix to a minimal rotational representation
<span class="math notranslate nohighlight">\(\vec{\Gamma} \in \mathbb{R}^3\)</span>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">representation</span></code></p></th>
<th class="head"><p>Rotational representation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/xyz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;arm&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order (default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/zyx&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;vehicle&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/yxz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;camera&quot;</span></code></p></td>
<td><p>RPY angular rates in YXZ order</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;eul&quot;</span></code></p></td>
<td><p>Euler angular rates in ZYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;exp&quot;</span></code></p></td>
<td><p>exponential coordinate rates</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#spatialmath.base.transforms3d.x2r" title="spatialmath.base.transforms3d.x2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">x2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2rpy" title="spatialmath.base.transforms3d.tr2rpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2rpy()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2eul" title="spatialmath.base.transforms3d.tr2eul"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2eul()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.trlog" title="spatialmath.base.transforms3d.trlog"><code class="xref py py-func docutils literal notranslate"><span class="pre">trlog()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.rodrigues">
<span class="sig-name descname"><span class="pre">rodrigues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rodrigues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rodrigues" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Rodrigues‚Äô formula for 3D rotation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>w</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì rotation vector</p></li>
<li><p><strong>theta</strong> (<em>float</em><em> or </em><em>None</em>) ‚Äì rotation angle</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<p>Compute Rodrigues‚Äô formula for a rotation matrix given a rotation axis
and angle.</p>
<div class="math notranslate nohighlight">
\[\mat{R} = \mat{I}_{3 \times 3} + \sin \theta \skx{\hat{\vec{v}}} + (1 - \cos \theta) \skx{\hat{\vec{v}}}^2\]</div>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rodrigues</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rodrigues</span><span class="p">([</span><span class="mf">0.3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.rot2jac">
<span class="sig-name descname"><span class="pre">rot2jac</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">R</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rpy/xyz'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rot2jac"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rot2jac" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>DEPRECATED, use <a class="reference internal" href="#spatialmath.base.transforms3d.rotvelxform" title="spatialmath.base.transforms3d.rotvelxform"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotvelxform()</span></code></a> instead</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.rotvelxform">
<span class="sig-name descname"><span class="pre">rotvelxform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Œì</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rpy/xyz'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rotvelxform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rotvelxform" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Rotational velocity transformation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ùö™</strong> (<em>array_like</em><em>(</em><em>3</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) ‚Äì angular representation or rotation matrix</p></li>
<li><p><strong>representation</strong> (<em>str</em><em>, </em><em>optional</em>) ‚Äì defaults to ‚Äòrpy/xyz‚Äô</p></li>
<li><p><strong>inverse</strong> (<em>bool</em>) ‚Äì compute mapping from analytical rates to angular velocity</p></li>
<li><p><strong>full</strong> (<em>bool</em>) ‚Äì return 6x6 transform for spatial velocity</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rotation rate transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3) or ndarray(6,6)</p>
</dd>
</dl>
<p>Computes the transformation from analytical rates
<span class="math notranslate nohighlight">\(\dvec{x}\)</span> where the rotational part is expressed as the rate of change in
some angular representation to spatial velocity <span class="math notranslate nohighlight">\(\omega\)</span>, where
rotation rate is expressed as angular velocity.</p>
<div class="math notranslate nohighlight">
\[\vec{\omega} = \mat{A}(\Gamma) \dvec{x}\]</div>
<p>where <span class="math notranslate nohighlight">\(\mat{A}\)</span> is a 3x3 matrix and <span class="math notranslate nohighlight">\(\Gamma \in
\mathbb{R}^3\)</span> is a minimal angular representation.</p>
<p><span class="math notranslate nohighlight">\(\mat{A}(\Gamma)\)</span> is a function of the rotational representation
which can be specified by the parameter <code class="docutils literal notranslate"><span class="pre">ùö™</span></code> as a 1D array, or by
an SO(3) rotation matrix which will be converted to the <code class="docutils literal notranslate"><span class="pre">representation</span></code>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">representation</span></code></p></th>
<th class="head"><p>Rotational representation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/xyz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;arm&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order (default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/zyx&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;vehicle&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/yxz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;camera&quot;</span></code></p></td>
<td><p>RPY angular rates in YXZ order</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;eul&quot;</span></code></p></td>
<td><p>Euler angular rates in ZYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;exp&quot;</span></code></p></td>
<td><p>exponential coordinate rates</p></td>
</tr>
</tbody>
</table>
<p>If <code class="docutils literal notranslate"><span class="pre">inverse==True</span></code> return <span class="math notranslate nohighlight">\(\mat{A}^{-1}\)</span> computed using
a closed-form solution rather than matrix inverse.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">full=True</span></code> a block diagonal 6x6 matrix is returned which transforms analytic
velocity to spatial velocity.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Similar to <a class="reference internal" href="#spatialmath.base.transforms3d.eul2jac" title="spatialmath.base.transforms3d.eul2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2jac()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2jac" title="spatialmath.base.transforms3d.rpy2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2jac()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.exp2jac" title="spatialmath.base.transforms3d.exp2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">exp2jac()</span></code></a>
with <code class="docutils literal notranslate"><span class="pre">full=False</span></code>.</p>
</div>
<p>The analytical Jacobian is</p>
<div class="math notranslate nohighlight">
\[\mat{J}_a(q) = \mat{A}^{-1}(\Gamma)\, \mat{J}(q)\]</div>
<p>where <span class="math notranslate nohighlight">\(\mat{A}\)</span> is computed with <code class="docutils literal notranslate"><span class="pre">inverse==True</span></code> and <code class="docutils literal notranslate"><span class="pre">full=True</span></code>.</p>
<p>Reference:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">symbolic/angvelxform.ipynb</span></code> in this Toolbox</p></li>
<li><p>Robot Dynamics Lecture Notes, Robotic Systems Lab, ETH Zurich, 2018
<a class="reference external" href="https://ethz.ch/content/dam/ethz/special-interest/mavt/robotics-n-intelligent-systems/rsl-dam/documents/RobotDynamics2018/RD_HS2018script.pdf">https://ethz.ch/content/dam/ethz/special-interest/mavt/robotics-n-intelligent-systems/rsl-dam/documents/RobotDynamics2018/RD_HS2018script.pdf</a></p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rotvelxform_inv_dot" title="spatialmath.base.transforms3d.rotvelxform_inv_dot"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotvelxform_inv_dot()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.eul2jac" title="spatialmath.base.transforms3d.eul2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2jac()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2r" title="spatialmath.base.transforms3d.rpy2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.exp2jac" title="spatialmath.base.transforms3d.exp2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">exp2jac()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.rotvelxform_inv_dot">
<span class="sig-name descname"><span class="pre">rotvelxform_inv_dot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Œì</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Œìd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rpy/xyz'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rotvelxform_inv_dot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rotvelxform_inv_dot" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Derivative of angular velocity transformation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ùö™</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì angular representation</p></li>
<li><p><strong>ùö™d</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì angular representation rate <span class="math notranslate nohighlight">\(\dvec{\Gamma}\)</span></p></li>
<li><p><strong>representation</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) ‚Äì defaults to ‚Äòrpy/xyz‚Äô</p></li>
<li><p><strong>full</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) ‚Äì return 6x6 transform for spatial velocity</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>derivative of inverse angular velocity transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(6,6) or ndarray(3,3)</p>
</dd>
</dl>
<p>The angular rate transformation matrix <span class="math notranslate nohighlight">\(\mat{A} \in \mathbb{R}^{6 \times 6}\)</span> is such that</p>
<div class="math notranslate nohighlight">
\[\dvec{x} = \mat{A}^{-1}(\Gamma) \vec{\nu}\]</div>
<p>where <span class="math notranslate nohighlight">\(\dvec{x} \in \mathbb{R}^6\)</span> is analytic velocity <span class="math notranslate nohighlight">\((\vec{v}, \dvec{\Gamma})\)</span>,
<span class="math notranslate nohighlight">\(\vec{\nu} \in \mathbb{R}^6\)</span> is spatial velocity <span class="math notranslate nohighlight">\((\vec{v}, \vec{\omega})\)</span>, and
<span class="math notranslate nohighlight">\(\vec{\Gamma} \in \mathbb{R}^3\)</span> is a minimal rotational
representation.</p>
<p>The relationship between spatial and analytic acceleration is</p>
<div class="math notranslate nohighlight">
\[\ddvec{x} = \dmat{A}^{-1}(\Gamma, \dot{\Gamma}) \vec{\nu} + \mat{A}^{-1}(\Gamma) \dvec{\nu}\]</div>
<p>and <span class="math notranslate nohighlight">\(\dmat{A}^{-1}(\Gamma, \dot{\Gamma})\)</span> is computed by this function.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">representation</span></code></p></th>
<th class="head"><p>Rotational representation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/xyz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;arm&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order (default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/zyx&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;vehicle&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/yxz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;camera&quot;</span></code></p></td>
<td><p>RPY angular rates in YXZ order</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;eul&quot;</span></code></p></td>
<td><p>Euler angular rates in ZYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;exp&quot;</span></code></p></td>
<td><p>exponential coordinate rates</p></td>
</tr>
</tbody>
</table>
<p>If <code class="docutils literal notranslate"><span class="pre">full=True</span></code> a block diagonal 6x6 matrix is returned which transforms analytic
analytic rotational acceleration to angular acceleration.</p>
<p>Reference:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">symbolic/angvelxform.ipynb</span></code> in this Toolbox</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symbolic/angvelxform_dot.ipynb</span></code> in this Toolbox</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rotvelxform" title="spatialmath.base.transforms3d.rotvelxform"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotvelxform()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.eul2jac" title="spatialmath.base.transforms3d.eul2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2jac()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2r" title="spatialmath.base.transforms3d.rpy2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.exp2jac" title="spatialmath.base.transforms3d.exp2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">exp2jac()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.rotx">
<span class="sig-name descname"><span class="pre">rotx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rotx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rotx" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create SO(3) rotation about X-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) ‚Äì rotation angle about X-axis</p></li>
<li><p><strong>unit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rotx(Œ∏)</span></code> is an SO(3) rotation matrix (3x3) representing a rotation
of Œ∏ radians about the x-axis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rotx(Œ∏,</span> <span class="pre">&quot;deg&quot;)</span></code> as above but Œ∏ is in degrees</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">rotx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotx</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.7071, -0.7071],</span>
<span class="go">       [ 0.    ,  0.7071,  0.7071]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.trotx" title="spatialmath.base.transforms3d.trotx"><code class="xref py py-func docutils literal notranslate"><span class="pre">trotx()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.roty">
<span class="sig-name descname"><span class="pre">roty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#roty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.roty" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create SO(3) rotation about Y-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) ‚Äì rotation angle about Y-axis</p></li>
<li><p><strong>unit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">roty(Œ∏)</span></code> is an SO(3) rotation matrix (3x3) representing a rotation
of Œ∏ radians about the y-axis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">roty(Œ∏,</span> <span class="pre">&quot;deg&quot;)</span></code> as above but Œ∏ is in degrees</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">roty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roty</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9553,  0.    ,  0.2955],</span>
<span class="go">       [ 0.    ,  1.    ,  0.    ],</span>
<span class="go">       [-0.2955,  0.    ,  0.9553]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roty</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.7071,  0.    ,  0.7071],</span>
<span class="go">       [ 0.    ,  1.    ,  0.    ],</span>
<span class="go">       [-0.7071,  0.    ,  0.7071]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.troty" title="spatialmath.base.transforms3d.troty"><code class="xref py py-func docutils literal notranslate"><span class="pre">troty()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.rotz">
<span class="sig-name descname"><span class="pre">rotz</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rotz"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rotz" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create SO(3) rotation about Z-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) ‚Äì rotation angle about Z-axis</p></li>
<li><p><strong>unit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rotz(Œ∏)</span></code> is an SO(3) rotation matrix (3x3) representing a rotation
of Œ∏ radians about the z-axis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rotz(Œ∏,</span> <span class="pre">&quot;deg&quot;)</span></code> as above but Œ∏ is in degrees</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">rotz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotz</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9553, -0.2955,  0.    ],</span>
<span class="go">       [ 0.2955,  0.9553,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotz</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.7071, -0.7071,  0.    ],</span>
<span class="go">       [ 0.7071,  0.7071,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.trotz" title="spatialmath.base.transforms3d.trotz"><code class="xref py py-func docutils literal notranslate"><span class="pre">trotz()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.rpy2jac">
<span class="sig-name descname"><span class="pre">rpy2jac</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'zyx'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rpy2jac"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rpy2jac" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Jacobian from RPY angle rates to angular velocity</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>angles</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code>(<code class="docutils literal notranslate"><span class="pre">ScalarType</span></code>, bound= <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.generic" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">generic</span></code></a>, covariant=True)]]]) ‚Äì roll-pitch-yaw angles (‚ç∫, Œ≤, Œ≥)</p></li>
<li><p><strong>order</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) ‚Äì rotation order: ‚Äòzyx‚Äô [default], ‚Äòxyz‚Äô, or ‚Äòyxz‚Äô</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code>(<code class="docutils literal notranslate"><span class="pre">ScalarType</span></code>, bound= <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.generic" title="(in NumPy v1.24)"><code class="xref py py-class docutils literal notranslate"><span class="pre">generic</span></code></a>, covariant=True)]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Jacobian matrix</p>
</dd>
</dl>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">rpy2jac(‚ç∫,</span> <span class="pre">Œ≤,</span> <span class="pre">Œ≥)</span></code> is a Jacobian matrix (3x3) that maps roll-pitch-yaw
angle rates to angular velocity at the operating point (‚ç∫, Œ≤, Œ≥). These
correspond to successive rotations about the axes specified by <code class="docutils literal notranslate"><span class="pre">order</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p>‚Äòzyx‚Äô [default], rotate by Œ≥ about the z-axis, then by Œ≤ about the new
y-axis, then by ‚ç∫ about the new x-axis.  Convention for a mobile robot
with x-axis forward and y-axis sideways.</p></li>
<li><p>‚Äòxyz‚Äô, rotate by Œ≥ about the x-axis, then by Œ≤ about the new y-axis,
then by ‚ç∫ about the new z-axis. Convention for a robot gripper with
z-axis forward and y-axis between the gripper fingers.</p></li>
<li><p>‚Äòyxz‚Äô, rotate by Œ≥ about the y-axis, then by Œ≤ about the new x-axis,
then by ‚ç∫ about the new z-axis. Convention for a camera with z-axis
parallel to the optic axis and x-axis parallel to the pixel rows.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">rpy2jac(ùö™)</span></code> as above but the roll, pitch, yaw angles are taken
from <code class="docutils literal notranslate"><span class="pre">ùö™</span></code> which is a 3-vector with values (‚ç∫, Œ≤, Œ≥).</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">rpy2jac</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2jac</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="go">array([[ 0.9363, -0.2955,  0.    ],</span>
<span class="go">       [ 0.2896,  0.9553,  0.    ],</span>
<span class="go">       [-0.1987,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Used in the creation of an analytical Jacobian.</p></li>
<li><p>Angles in radians, rates in radians/sec.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><p>Robotics, Vision &amp; Control for Python, Section 8.1.3, P. Corke, Springer 2023.</p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rotvelxform" title="spatialmath.base.transforms3d.rotvelxform"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotvelxform()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.eul2jac" title="spatialmath.base.transforms3d.eul2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2jac()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.exp2jac" title="spatialmath.base.transforms3d.exp2jac"><code class="xref py py-func docutils literal notranslate"><span class="pre">exp2jac()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.rpy2r">
<span class="sig-name descname"><span class="pre">rpy2r</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roll</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pitch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yaw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'zyx'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rpy2r"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rpy2r" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create an SO(3) rotation matrix from roll-pitch-yaw angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>roll</strong> (<em>float</em><em> or </em><em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì roll angle</p></li>
<li><p><strong>pitch</strong> (<em>float</em>) ‚Äì pitch angle</p></li>
<li><p><strong>yaw</strong> (<em>float</em>) ‚Äì yaw angle</p></li>
<li><p><strong>unit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
<li><p><strong>order</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) ‚Äì rotation order: ‚Äòzyx‚Äô [default], ‚Äòxyz‚Äô, or ‚Äòyxz‚Äô</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad argument</p>
</dd>
</dl>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">rpy2r(‚ç∫,</span> <span class="pre">Œ≤,</span> <span class="pre">Œ≥)</span></code> is an SO(3) orthonormal rotation matrix (3x3)
equivalent to the specified roll (‚ç∫), pitch (Œ≤), yaw (Œ≥) angles angles.
These correspond to successive rotations about the axes specified by
<code class="docutils literal notranslate"><span class="pre">order</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p>‚Äòzyx‚Äô [default], rotate by Œ≥ about the z-axis, then by Œ≤ about the new
y-axis, then by ‚ç∫ about the new x-axis.  Convention for a mobile robot
with x-axis forward and y-axis sideways.</p></li>
<li><p>‚Äòxyz‚Äô, rotate by Œ≥ about the x-axis, then by Œ≤ about the new y-axis,
then by ‚ç∫ about the new z-axis. Convention for a robot gripper with
z-axis forward and y-axis between the gripper fingers.</p></li>
<li><p>‚Äòyxz‚Äô, rotate by Œ≥ about the y-axis, then by Œ≤ about the new x-axis,
then by ‚ç∫ about the new z-axis. Convention for a camera with z-axis
parallel to the optic axis and x-axis parallel to the pixel rows.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">rpy2r(RPY)</span></code> as above but the roll, pitch, yaw angles are taken
from <code class="docutils literal notranslate"><span class="pre">RPY</span></code> which is a 3-vector with values (‚ç∫, Œ≤, Œ≥).</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">rpy2r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2r</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9363, -0.2751,  0.2184],</span>
<span class="go">       [ 0.2896,  0.9564, -0.037 ],</span>
<span class="go">       [-0.1987,  0.0978,  0.9752]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2r</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="go">array([[ 0.9363, -0.2751,  0.2184],</span>
<span class="go">       [ 0.2896,  0.9564, -0.037 ],</span>
<span class="go">       [-0.1987,  0.0978,  0.9752]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2r</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.8138, -0.441 ,  0.3785],</span>
<span class="go">       [ 0.4698,  0.8826,  0.018 ],</span>
<span class="go">       [-0.342 ,  0.1632,  0.9254]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.eul2r" title="spatialmath.base.transforms3d.eul2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2tr" title="spatialmath.base.transforms3d.rpy2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2tr()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2rpy" title="spatialmath.base.transforms3d.tr2rpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2rpy()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.rpy2tr">
<span class="sig-name descname"><span class="pre">rpy2tr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roll</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pitch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yaw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'zyx'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rpy2tr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rpy2tr" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create an SE(3) rotation matrix from roll-pitch-yaw angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>roll</strong> (<em>float</em>) ‚Äì roll angle</p></li>
<li><p><strong>pitch</strong> (<em>float</em>) ‚Äì pitch angle</p></li>
<li><p><strong>yaw</strong> (<em>float</em>) ‚Äì yaw angle</p></li>
<li><p><strong>unit</strong> (<em>str</em>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
<li><p><strong>order</strong> (<em>str</em>) ‚Äì rotation order: ‚Äòzyx‚Äô [default], ‚Äòxyz‚Äô, or ‚Äòyxz‚Äô</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">rpy2tr(‚ç∫,</span> <span class="pre">Œ≤,</span> <span class="pre">Œ≥)</span></code> is an SE(3) matrix (4x4) equivalent to the specified
roll (‚ç∫), pitch (Œ≤), yaw (Œ≥) angles angles. These correspond to successive
rotations about the axes specified by <code class="docutils literal notranslate"><span class="pre">order</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p>‚Äòzyx‚Äô [default], rotate by Œ≥ about the z-axis, then by Œ≤ about the new
y-axis, then by ‚ç∫ about the new x-axis.  Convention for a mobile robot
with x-axis forward and y-axis sideways.</p></li>
<li><p>‚Äòxyz‚Äô, rotate by Œ≥ about the x-axis, then by Œ≤ about the new y-axis,
then by ‚ç∫ about the new z-axis. Convention for a robot gripper with
z-axis forward and y-axis between the gripper fingers.</p></li>
<li><p>‚Äòyxz‚Äô, rotate by Œ≥ about the y-axis, then by Œ≤ about the new x-axis,
then by ‚ç∫ about the new z-axis. Convention for a camera with z-axis
parallel to the optic axis and x-axis parallel to the pixel rows.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">rpy2tr(RPY)</span></code> as above but the roll, pitch, yaw angles are taken
from <code class="docutils literal notranslate"><span class="pre">RPY</span></code> which is a 3-vector with values (‚ç∫, Œ≤, Œ≥).</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">rpy2tr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2tr</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9363, -0.2751,  0.2184,  0.    ],</span>
<span class="go">       [ 0.2896,  0.9564, -0.037 ,  0.    ],</span>
<span class="go">       [-0.1987,  0.0978,  0.9752,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2tr</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="go">array([[ 0.9363, -0.2751,  0.2184,  0.    ],</span>
<span class="go">       [ 0.2896,  0.9564, -0.037 ,  0.    ],</span>
<span class="go">       [-0.1987,  0.0978,  0.9752,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2tr</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.8138, -0.441 ,  0.3785,  0.    ],</span>
<span class="go">       [ 0.4698,  0.8826,  0.018 ,  0.    ],</span>
<span class="go">       [-0.342 ,  0.1632,  0.9254,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, the translational component is zero but it can be
set to a non-zero value.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.eul2tr" title="spatialmath.base.transforms3d.eul2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2tr()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2r" title="spatialmath.base.transforms3d.rpy2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2rpy" title="spatialmath.base.transforms3d.tr2rpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2rpy()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.tr2adjoint">
<span class="sig-name descname"><span class="pre">tr2adjoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2adjoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2adjoint" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Adjoint matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>T</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) ‚Äì SE(3) or SO(3) matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>adjoint matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(6,6) or ndarray(3,3)</p>
</dd>
</dl>
<p>Computes an adjoint matrix that maps the Lie algebra between frames.</p>
<p>where <span class="math notranslate nohighlight">\(\mat{T} \in \SE3\)</span>.</p>
<p><code class="docutils literal notranslate"><span class="pre">tr2jac(T)</span></code> is an adjoint matrix (6x6) that maps spatial velocity or
differential motion between frame {B} to frame {A} which are attached to the
same moving body.  The pose of {B} relative to {A} is represented by the
homogeneous transform T = <span class="math notranslate nohighlight">\({}^A {\bf T}_B\)</span>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">tr2adjoint</span><span class="p">,</span> <span class="n">trotx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr2adjoint</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ,  0.    , -4.2544,  6.5498],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955,  6.    , -1.1821, -3.8213],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553, -5.    ,  3.8213, -1.1821],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  0.    ,  0.9553, -0.2955],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  0.    ,  0.2955,  0.9553]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Robotics, Vision &amp; Control for Python, Section 3, P. Corke, Springer 2023.</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">`</span></a>Lie groups for 2D and 3D Transformations &lt;<a class="reference external" href="http://ethaneade.com/lie.pdf">http://ethaneade.com/lie.pdf</a>&gt;_</p></li>
</ul>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.tr2angvec">
<span class="sig-name descname"><span class="pre">tr2angvec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2angvec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2angvec" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Convert SO(3) or SE(3) to angle and rotation vector</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) ‚Äì SE(3) or SO(3) matrix</p></li>
<li><p><strong>unit</strong> (<em>str</em>) ‚Äì ‚Äòrad‚Äô or ‚Äòdeg‚Äô</p></li>
<li><p><strong>check</strong> (<em>bool</em>) ‚Äì check that rotation matrix is valid</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><span class="math notranslate nohighlight">\((\theta, {\bf v})\)</span></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float, ndarray(3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad arguments</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">(v,</span> <span class="pre">Œ∏)</span> <span class="pre">=</span> <span class="pre">tr2angvec(R)</span></code> is a rotation angle and a vector about which the
rotation acts that corresponds to the rotation part of <code class="docutils literal notranslate"><span class="pre">R</span></code>.</p>
<p>By default the angle is in radians but can be changed setting <cite>unit=‚Äôdeg‚Äô</cite>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span>  <span class="n">troty</span><span class="p">,</span> <span class="n">tr2angvec</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">troty</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="n">tr2angvec</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span>
<span class="go">0.7853981633974483 [0. 1. 0.]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If the input is SE(3) the translation component is ignored.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.angvec2r" title="spatialmath.base.transforms3d.angvec2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">angvec2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.angvec2tr" title="spatialmath.base.transforms3d.angvec2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">angvec2tr()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2rpy" title="spatialmath.base.transforms3d.tr2rpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2rpy()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2eul" title="spatialmath.base.transforms3d.tr2eul"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2eul()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.tr2delta">
<span class="sig-name descname"><span class="pre">tr2delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2delta" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Difference of SE(3) matrices as differential motion</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T0</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) ‚Äì first SE(3) matrix</p></li>
<li><p><strong>T1</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) ‚Äì second SE(3) matrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Differential motion as a 6-vector</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(6)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad arguments</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tr2delta(T0,</span> <span class="pre">T1)</span></code> is the differential motion Œî (6x1) corresponding to
infinitessimal motion (in the T0 frame) from pose T0 to T1 which are SE(3)
matrices.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tr2delta(T)</span></code> as above but the motion is from the world frame to the
pose represented by T.</p></li>
</ul>
<p>The vector <span class="math notranslate nohighlight">\(\Delta = [\delta_x, \delta_y, \delta_z, \theta_x,
\theta_y, \theta_z]\)</span> represents infinitessimal translation and rotation, and
is an approximation to the instantaneous spatial velocity multiplied by time
step.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">tr2delta</span><span class="p">,</span> <span class="n">trotx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T1</span> <span class="o">=</span> <span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T2</span> <span class="o">=</span> <span class="n">trotx</span><span class="p">(</span><span class="mf">0.31</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mf">5.02</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr2delta</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">)</span>
<span class="go">array([ 0.    ,  0.0191, -0.0059,  0.01  ,  0.    ,  0.    ])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Œî is only an approximation to the motion T, and assumes
that T0 ~ T1 or T ~ eye(4,4).</p></li>
<li><p>Can be considered as an approximation to the effect of spatial velocity over a
a time interval, average spatial velocity multiplied by time.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><p>Robotics, Vision &amp; Control for Python, Section 3.1, P. Corke, Springer 2023.</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#spatialmath.base.transforms3d.delta2tr" title="spatialmath.base.transforms3d.delta2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">delta2tr()</span></code></a></p>
</dd>
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.tr2eul">
<span class="sig-name descname"><span class="pre">tr2eul</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2eul"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2eul" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Convert SO(3) or SE(3) to ZYX Euler angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) ‚Äì SE(3) or SO(3) matrix</p></li>
<li><p><strong>unit</strong> (<em>str</em>) ‚Äì ‚Äòrad‚Äô or ‚Äòdeg‚Äô</p></li>
<li><p><strong>flip</strong> (<em>bool</em>) ‚Äì choose first Euler angle to be in quadrant 2 or 3</p></li>
<li><p><strong>check</strong> (<em>bool</em>) ‚Äì check that rotation matrix is valid</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ZYZ Euler angles</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3)</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">tr2eul(R)</span></code> are the Euler angles corresponding to
the rotation part of <code class="docutils literal notranslate"><span class="pre">R</span></code>.</p>
<p>The 3 angles <span class="math notranslate nohighlight">\([\phi, \theta, \psi]\)</span> correspond to sequential rotations
about the Z, Y and Z axes respectively.</p>
<p>By default the angles are in radians but can be changed setting <cite>unit=‚Äôdeg‚Äô</cite>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">tr2eul</span><span class="p">,</span> <span class="n">eul2tr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">eul2tr</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">[[ 0.7264 -0.6232  0.2896  0.    ]</span>
<span class="go"> [ 0.6364  0.7691  0.0587  0.    ]</span>
<span class="go"> [-0.2593  0.1417  0.9553  0.    ]</span>
<span class="go"> [ 0.      0.      0.      1.    ]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr2eul</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([0.2, 0.3, 0.5])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>There is a singularity for the case where <span class="math notranslate nohighlight">\(\theta=0\)</span> in which
case we arbitrarily set <span class="math notranslate nohighlight">\(\phi = 0\)</span> and <span class="math notranslate nohighlight">\(\phi\)</span> is set to
<span class="math notranslate nohighlight">\(\phi+\psi\)</span>.</p></li>
<li><p>If the input is SE(3) the translation component is ignored.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.eul2r" title="spatialmath.base.transforms3d.eul2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.eul2tr" title="spatialmath.base.transforms3d.eul2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2tr()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2rpy" title="spatialmath.base.transforms3d.tr2rpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2rpy()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.tr2jac">
<span class="sig-name descname"><span class="pre">tr2jac</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2jac"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2jac" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>SE(3) Jacobian matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>T</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) ‚Äì SE(3) matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Jacobian matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(6,6)</p>
</dd>
</dl>
<p>Computes an Jacobian matrix that maps spatial velocity between two frames
defined by an SE(3) matrix.</p>
<p><code class="docutils literal notranslate"><span class="pre">tr2jac(T)</span></code> is a Jacobian matrix (6x6) that maps spatial velocity or
differential motion from frame {B} to frame {A} where the pose of {B}
elative to {A} is represented by the homogeneous transform T = <span class="math notranslate nohighlight">\({}^A
{\bf T}_B\)</span>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">tr2jac</span><span class="p">,</span> <span class="n">trotx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr2jac</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  0.    ,  0.9553, -0.2955],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  0.    ,  0.2955,  0.9553]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><p>Robotics, Vision &amp; Control for Python, Section 3.1, P. Corke, Springer 2023.</p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.tr2rpy">
<span class="sig-name descname"><span class="pre">tr2rpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'zyx'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2rpy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2rpy" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Convert SO(3) or SE(3) to roll-pitch-yaw angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) ‚Äì SE(3) or SO(3) matrix</p></li>
<li><p><strong>unit</strong> (<em>str</em>) ‚Äì ‚Äòrad‚Äô or ‚Äòdeg‚Äô</p></li>
<li><p><strong>order</strong> (<em>str</em>) ‚Äì ‚Äòxyz‚Äô, ‚Äòzyx‚Äô or ‚Äòyxz‚Äô [default ‚Äòzyx‚Äô]</p></li>
<li><p><strong>check</strong> (<em>bool</em>) ‚Äì check that rotation matrix is valid</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Roll-pitch-yaw angles</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad arguments</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">tr2rpy(R)</span></code> are the roll-pitch-yaw angles corresponding to
the rotation part of <code class="docutils literal notranslate"><span class="pre">R</span></code>.</p>
<p>The 3 angles RPY = <span class="math notranslate nohighlight">\([\theta_R, \theta_P, \theta_Y]\)</span> correspond to
sequential rotations about the Z, Y and X axes respectively.  The axis order
sequence can be changed by setting:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">order='xyz'</span></code>  for sequential rotations about X, Y, Z axes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">order='yxz'</span></code>  for sequential rotations about Y, X, Z axes</p></li>
</ul>
<p>By default the angles are in radians but can be changed setting
<code class="docutils literal notranslate"><span class="pre">unit='deg'</span></code>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">tr2rpy</span><span class="p">,</span> <span class="n">rpy2tr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">rpy2tr</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">[[ 0.8384 -0.4183  0.3494  0.    ]</span>
<span class="go"> [ 0.458   0.8882 -0.0355  0.    ]</span>
<span class="go"> [-0.2955  0.1898  0.9363  0.    ]</span>
<span class="go"> [ 0.      0.      0.      1.    ]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr2rpy</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([0.2, 0.3, 0.5])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>There is a singularity for the case where <span class="math notranslate nohighlight">\(\theta_P = \pi/2\)</span> in
which case we arbitrarily set <span class="math notranslate nohighlight">\(\theta_R=0\)</span> and
<span class="math notranslate nohighlight">\(\theta_Y = \theta_R + \theta_Y\)</span>.</p></li>
<li><p>If the input is SE(3) the translation component is ignored.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rpy2r" title="spatialmath.base.transforms3d.rpy2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2tr" title="spatialmath.base.transforms3d.rpy2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2tr()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2eul" title="spatialmath.base.transforms3d.tr2eul"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2eul()</span></code></a>,
<a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.tr2x">
<span class="sig-name descname"><span class="pre">tr2x</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rpy/xyz'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2x"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2x" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Convert SE(3) to an analytic representation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) ‚Äì pose as an SE(3) matrix</p></li>
<li><p><strong>representation</strong> (<em>str</em><em>, </em><em>optional</em>) ‚Äì angular representation to use, defaults to ‚Äúrpy/xyz‚Äù</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>analytic vector representation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(6)</p>
</dd>
</dl>
<p>Convert an SE(3) matrix into an equivalent vector representation
<span class="math notranslate nohighlight">\(\vec{x}  = (\vec{t},\vec{r}) \in \mathbb{R}^6\)</span> where rotation
<span class="math notranslate nohighlight">\(\vec{r} \in \mathbb{R}^3\)</span> is encoded in a minimal representation.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">representation</span></code></p></th>
<th class="head"><p>Rotational representation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/xyz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;arm&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order (default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/zyx&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;vehicle&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/yxz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;camera&quot;</span></code></p></td>
<td><p>RPY angular rates in YXZ order</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;eul&quot;</span></code></p></td>
<td><p>Euler angular rates in ZYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;exp&quot;</span></code></p></td>
<td><p>exponential coordinate rates</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#spatialmath.base.transforms3d.r2x" title="spatialmath.base.transforms3d.r2x"><code class="xref py py-func docutils literal notranslate"><span class="pre">r2x()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.tranimate">
<span class="sig-name descname"><span class="pre">tranimate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tranimate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tranimate" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Animate a 3D coordinate frame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>) or </em><em>an iterable returning same</em>) ‚Äì SE(3) or SO(3) matrix</p></li>
<li><p><strong>nframes</strong> (<em>int</em>) ‚Äì number of steps in the animation [default 100]</p></li>
<li><p><strong>repeat</strong> (<em>bool</em>) ‚Äì animate in endless loop [default False]</p></li>
<li><p><strong>interval</strong> (<em>int</em>) ‚Äì number of milliseconds between frames [default 50]</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) ‚Äì wait until animation is complete, default False</p></li>
<li><p><strong>movie</strong> (<em>str</em>) ‚Äì name of file to write MP4 movie into</p></li>
<li><p><strong>**kwargs</strong> ‚Äì <p>arguments passed to <code class="docutils literal notranslate"><span class="pre">trplot</span></code></p>
</p></li>
</ul>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tranimate(T)</span></code> where <code class="docutils literal notranslate"><span class="pre">T</span></code> is an SO(3) or SE(3) matrix, animates a 3D</p></li>
</ul>
<p>coordinate frame moving from the world frame to the frame <code class="docutils literal notranslate"><span class="pre">T</span></code> in
<code class="docutils literal notranslate"><span class="pre">nsteps</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tranimate(I)</span></code> where <code class="docutils literal notranslate"><span class="pre">I</span></code> is an iterable or generator, animates a 3D</p></li>
</ul>
<p>coordinate frame representing the pose of each element in the sequence of
SO(3) or SE(3) matrices.</p>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tranimate</span><span class="p">(</span><span class="n">transl</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="nd">@trotx</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="n">arrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tranimate</span><span class="p">(</span><span class="n">transl</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="nd">@trotx</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="n">arrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">movie</span><span class="o">=</span><span class="s1">&#39;spin.mp4&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For Jupyter this works with the <code class="docutils literal notranslate"><span class="pre">notebook</span></code> and <code class="docutils literal notranslate"><span class="pre">TkAgg</span></code>
backends.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The animation occurs in the background after <code class="docutils literal notranslate"><span class="pre">tranimate</span></code> has
returned. If <code class="docutils literal notranslate"><span class="pre">block=True</span></code> this blocks after the animation has completed.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When saving animation to a file the animation does not appear
on screen.  A <code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> exception may occur, this seems to
be a matplotlib bug #19599</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>not supported</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><cite>trplot</cite>, <cite>plotvol3</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.transl">
<span class="sig-name descname"><span class="pre">transl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#transl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.transl" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create SE(3) pure translation, or extract translation from SE(3) matrix</p>
<p><strong>Create a translational SE(3) matrix</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em>) ‚Äì translation along X-axis</p></li>
<li><p><strong>y</strong> (<em>float</em>) ‚Äì translation along Y-axis</p></li>
<li><p><strong>z</strong> (<em>float</em>) ‚Äì translation along Z-axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy(4,4)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad argument</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">transl(</span> <span class="pre">X,</span> <span class="pre">Y,</span> <span class="pre">Z</span> <span class="pre">)</span></code> is an SE(3) homogeneous transform (4x4)
representing a pure translation of X, Y and Z.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">transl(</span> <span class="pre">V</span> <span class="pre">)</span></code> as above but the translation is given by a 3-element
list, dict, or a numpy array, row or column vector.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">transl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transl</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 3.],</span>
<span class="go">       [0., 1., 0., 4.],</span>
<span class="go">       [0., 0., 1., 5.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transl</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="go">array([[1., 0., 0., 3.],</span>
<span class="go">       [0., 1., 0., 4.],</span>
<span class="go">       [0., 0., 1., 5.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transl</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
<span class="go">array([[1., 0., 0., 3.],</span>
<span class="go">       [0., 1., 0., 4.],</span>
<span class="go">       [0., 0., 1., 5.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
</pre></div>
</div>
<p><strong>Extract the translational part of an SE(3) matrix</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>numpy</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) ‚Äì SE(3) transformation matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>translation elements of SE(2) matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad argument</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">transl(T)</span></code> is the translational part of a homogeneous transform T as a
3-element numpy array.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">transl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transl</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([3, 4, 5])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is compatible with the MATLAB version of the
Toolbox.  It is unusual/weird in doing two completely different things
inside the one function.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="func_2d.html#spatialmath.base.transforms2d.transl2" title="spatialmath.base.transforms2d.transl2"><code class="xref py py-func docutils literal notranslate"><span class="pre">transl2()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.trexp">
<span class="sig-name descname"><span class="pre">trexp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trexp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trexp" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Exponential of se(3) or so(3) matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>S</strong> ‚Äì se(3), so(3) matrix or equivalent twist vector</p></li>
<li><p><strong>Œ∏</strong> (<em>float</em>) ‚Äì motion</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>matrix exponential in SE(3) or SO(3)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4) or ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad arguments</p>
</dd>
</dl>
<p>An efficient closed-form solution of the matrix exponential for arguments
that are so(3) or se(3).</p>
<p>For so(3) the results is an SO(3) rotation matrix:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(Œ©)</span></code> is the matrix exponential of the so(3) element <code class="docutils literal notranslate"><span class="pre">Œ©</span></code> which is
a 3x3 skew-symmetric matrix.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(Œ©,</span> <span class="pre">Œ∏)</span></code> as above but for an so(3) motion of Œ©Œ∏, where <code class="docutils literal notranslate"><span class="pre">Œ©</span></code> is
unit-norm skew-symmetric matrix representing a rotation axis and a
rotation magnitude given by <code class="docutils literal notranslate"><span class="pre">Œ∏</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(œâ)</span></code> is the matrix exponential of the so(3) element <code class="docutils literal notranslate"><span class="pre">œâ</span></code>
expressed as a 3-vector.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(œâ,</span> <span class="pre">Œ∏)</span></code> as above but for an so(3) motion of œâŒ∏ where <code class="docutils literal notranslate"><span class="pre">œâ</span></code> is a
unit-norm vector representing a rotation axis and a rotation magnitude
given by <code class="docutils literal notranslate"><span class="pre">Œ∏</span></code>. <code class="docutils literal notranslate"><span class="pre">œâ</span></code> is expressed as a 3-vector.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">trexp</span><span class="p">,</span> <span class="n">skew</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">(</span><span class="n">skew</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="go">array([[-0.6949,  0.7135,  0.0893],</span>
<span class="go">       [-0.192 , -0.3038,  0.9332],</span>
<span class="go">       [ 0.693 ,  0.6313,  0.3481]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">(</span><span class="n">skew</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># revolute unit twist</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    , -0.4161, -0.9093],</span>
<span class="go">       [ 0.    ,  0.9093, -0.4161]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">array([[-0.6949,  0.7135,  0.0893],</span>
<span class="go">       [-0.192 , -0.3038,  0.9332],</span>
<span class="go">       [ 0.693 ,  0.6313,  0.3481]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># revolute unit twist</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    , -0.4161, -0.9093],</span>
<span class="go">       [ 0.    ,  0.9093, -0.4161]])</span>
</pre></div>
</div>
<p>For se(3) the results is an SE(3) homogeneous transformation matrix:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(Œ£)</span></code> is the matrix exponential of the se(3) element <code class="docutils literal notranslate"><span class="pre">Œ£</span></code> which is
a 4x4 augmented skew-symmetric matrix.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(Œ£,</span> <span class="pre">Œ∏)</span></code> as above but for an se(3) motion of Œ£Œ∏, where <code class="docutils literal notranslate"><span class="pre">Œ£</span></code> must
represent a unit-twist, ie. the rotational component is a unit-norm
skew-symmetric matrix.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(S)</span></code> is the matrix exponential of the se(3) element <code class="docutils literal notranslate"><span class="pre">S</span></code>
represented as a 6-vector which can be considered a screw motion.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(S,</span> <span class="pre">Œ∏)</span></code> as above but for an se(3) motion of SŒ∏, where <code class="docutils literal notranslate"><span class="pre">S</span></code> must
represent a unit-twist, ie. the rotational component is a unit-norm
skew-symmetric matrix.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">trexp</span><span class="p">,</span> <span class="n">skewa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">(</span><span class="n">skewa</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]))</span>
<span class="go">array([[-0.423 ,  0.0528,  0.9046,  1.6867],</span>
<span class="go">       [ 0.8802, -0.213 ,  0.424 ,  1.9326],</span>
<span class="go">       [ 0.2151,  0.9756,  0.0436,  2.5984],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">(</span><span class="n">skewa</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># prismatic unit twist</span>
<span class="go">array([[1., 0., 0., 2.],</span>
<span class="go">       [0., 1., 0., 0.],</span>
<span class="go">       [0., 0., 1., 0.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="go">array([[-0.423 ,  0.0528,  0.9046,  1.6867],</span>
<span class="go">       [ 0.8802, -0.213 ,  0.424 ,  1.9326],</span>
<span class="go">       [ 0.2151,  0.9756,  0.0436,  2.5984],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 2.],</span>
<span class="go">       [0., 1., 0., 0.],</span>
<span class="go">       [0., 0., 1., 0.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><code class="xref py py-func docutils literal notranslate"><span class="pre">trexp2()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.trinterp">
<span class="sig-name descname"><span class="pre">trinterp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trinterp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trinterp" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Interpolate SE(3) matrices</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) ‚Äì initial SE(3) or SO(3) matrix value when s=0, if None then identity is used</p></li>
<li><p><strong>end</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) ‚Äì final SE(3) or SO(3) matrix, value when s=1</p></li>
<li><p><strong>s</strong> (<em>float</em>) ‚Äì interpolation coefficient, range 0 to 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>interpolated SE(3) or SO(3) matrix value</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4) or ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad arguments</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trinterp(None,</span> <span class="pre">T,</span> <span class="pre">S)</span></code> is a homogeneous transform (4x4) interpolated
between identity when S=0 and T (4x4) when S=1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trinterp(T0,</span> <span class="pre">T1,</span> <span class="pre">S)</span></code> as above but interpolated
between T0 (4x4) when S=0 and T1 (4x4) when S=1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trinterp(None,</span> <span class="pre">R,</span> <span class="pre">S)</span></code> is a rotation matrix (3x3) interpolated
between identity when S=0 and R (3x3) when S=1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trinterp(R0,</span> <span class="pre">R1,</span> <span class="pre">S)</span></code> as above but interpolated
between R0 (3x3) when S=0 and R1 (3x3) when S=1.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">transl</span><span class="p">,</span> <span class="n">trinterp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T1</span> <span class="o">=</span> <span class="n">transl</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T2</span> <span class="o">=</span> <span class="n">transl</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 1.],</span>
<span class="go">       [0., 1., 0., 2.],</span>
<span class="go">       [0., 0., 1., 3.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 4.],</span>
<span class="go">       [0., 1., 0., 5.],</span>
<span class="go">       [0., 0., 1., 6.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="go">array([[1. , 0. , 0. , 2.5],</span>
<span class="go">       [0. , 1. , 0. , 3.5],</span>
<span class="go">       [0. , 0. , 1. , 4.5],</span>
<span class="go">       [0. , 0. , 0. , 1. ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 0.],</span>
<span class="go">       [0., 1., 0., 0.],</span>
<span class="go">       [0., 0., 1., 0.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 4.],</span>
<span class="go">       [0., 1., 0., 5.],</span>
<span class="go">       [0., 0., 1., 6.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="go">array([[1. , 0. , 0. , 2. ],</span>
<span class="go">       [0. , 1. , 0. , 2.5],</span>
<span class="go">       [0. , 0. , 1. , 3. ],</span>
<span class="go">       [0. , 0. , 0. , 1. ]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Rotation is interpolated using quaternion spherical linear interpolation (slerp).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><code class="xref py py-func docutils literal notranslate"><span class="pre">spatialmath.base.quaternions.qlerp()</span></code> <code class="xref py py-func docutils literal notranslate"><span class="pre">trinterp2()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.trinv">
<span class="sig-name descname"><span class="pre">trinv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trinv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trinv" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Invert an SE(3) matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>T</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) ‚Äì SE(3) matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>inverse of SE(3) matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad arguments</p>
</dd>
</dl>
<p>Computes an efficient inverse of an SE(3) matrix:</p>
<p><span class="math notranslate nohighlight">\(\begin{pmatrix} {\bf R} &amp; t \\ 0\,0\,0 &amp; 1 \end{pmatrix}^{-1} =  \begin{pmatrix} {\bf R}^T &amp; -{\bf R}^T t \\ 0\,0\, 0 &amp; 1 \end{pmatrix}\)</span></p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">trinv</span><span class="p">,</span> <span class="n">trotx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinv</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    , -4.    ],</span>
<span class="go">       [ 0.    ,  0.9553,  0.2955, -6.5498],</span>
<span class="go">       [ 0.    , -0.2955,  0.9553, -4.2544],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">@</span> <span class="n">trinv</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([[ 1.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1., -0.,  0.],</span>
<span class="go">       [ 0., -0.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  1.]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.trlog">
<span class="sig-name descname"><span class="pre">trlog</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">twist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trlog"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trlog" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Logarithm of SO(3) or SE(3) matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) ‚Äì SE(3) or SO(3) matrix</p></li>
<li><p><strong>check</strong> (<em>bool</em>) ‚Äì check that matrix is valid</p></li>
<li><p><strong>twist</strong> (<em>bool</em>) ‚Äì return a twist vector instead of matrix [default]</p></li>
<li><p><strong>tol</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) ‚Äì Tolerance in units of eps for zero-rotation case, defaults to 10</p></li>
</ul>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>float</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>logarithm</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray(4,4) or ndarray(3,3)</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> ‚Äì bad argument</p>
</dd>
</dl>
<p>An efficient closed-form solution of the matrix logarithm for arguments that
are SO(3) or SE(3).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trlog(R)</span></code> is the logarithm of the passed rotation matrix <code class="docutils literal notranslate"><span class="pre">R</span></code> which
will be 3x3 skew-symmetric matrix.  The equivalent vector from <code class="docutils literal notranslate"><span class="pre">vex()</span></code>
is parallel to rotation axis and its norm is the amount of rotation about
that axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trlog(T)</span></code> is the logarithm of the passed homogeneous transformation
matrix <code class="docutils literal notranslate"><span class="pre">T</span></code> which will be 4x4 augumented skew-symmetric matrix. The
equivalent vector from <code class="docutils literal notranslate"><span class="pre">vexa()</span></code> is the twist vector (6x1) comprising [v
w].</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">trlog</span><span class="p">,</span> <span class="n">rotx</span><span class="p">,</span> <span class="n">trotx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trlog</span><span class="p">(</span><span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">))</span>
<span class="go">array([[ 0. ,  0. ,  0. ,  0. ],</span>
<span class="go">       [ 0. ,  0. , -0.3,  0. ],</span>
<span class="go">       [ 0. ,  0.3,  0. ,  0. ],</span>
<span class="go">       [ 0. ,  0. ,  0. ,  0. ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trlog</span><span class="p">(</span><span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">),</span> <span class="n">twist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([0. , 0. , 0. , 0.3, 0. , 0. ])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trlog</span><span class="p">(</span><span class="n">rotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">))</span>
<span class="go">array([[ 0. ,  0. ,  0. ],</span>
<span class="go">       [ 0. ,  0. , -0.3],</span>
<span class="go">       [ 0. ,  0.3,  0. ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trlog</span><span class="p">(</span><span class="n">rotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">),</span> <span class="n">twist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([0.3, 0. , 0. ])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.trexp" title="spatialmath.base.transforms3d.trexp"><code class="xref py py-func docutils literal notranslate"><span class="pre">trexp()</span></code></a> <a class="reference internal" href="func_nd.html#spatialmath.base.transformsNd.vex" title="spatialmath.base.transformsNd.vex"><code class="xref py py-func docutils literal notranslate"><span class="pre">vex()</span></code></a> <a class="reference internal" href="func_nd.html#spatialmath.base.transformsNd.vexa" title="spatialmath.base.transformsNd.vexa"><code class="xref py py-func docutils literal notranslate"><span class="pre">vexa()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.trnorm">
<span class="sig-name descname"><span class="pre">trnorm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trnorm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trnorm" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Normalize an SO(3) or SE(3) matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) ‚Äì SE(3) or SO(3) matrix</p></li>
<li><p><strong>T1</strong> ‚Äì second SE(3) matrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>normalized SE(3) or SO(3) matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4) or ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad arguments</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trnorm(R)</span></code> is guaranteed to be a proper orthogonal matrix rotation
matrix (3x3) which is <em>close</em> to the input matrix R (3x3).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trnorm(T)</span></code> as above but the rotational submatrix of the homogeneous
transformation T (4x4) is normalised while the translational part is
unchanged.</p></li>
</ul>
<p>The steps in normalization are:</p>
<ol class="arabic simple">
<li><p>If <span class="math notranslate nohighlight">\(\mathbf{R} = [n, o, a]\)</span></p></li>
<li><p>Form unit vectors <span class="math notranslate nohighlight">\(\hat{o}, \hat{a}\)</span> from  <span class="math notranslate nohighlight">\(o, a\)</span> respectively</p></li>
<li><p>Form the normal vector <span class="math notranslate nohighlight">\(\hat{n} = \hat{o} \times \hat{a}\)</span></p></li>
<li><p>Recompute <span class="math notranslate nohighlight">\(\hat{o} = \hat{a} \times \hat{n}\)</span> to ensure that <span class="math notranslate nohighlight">\(\hat{o}, \hat{a}\)</span> are orthogonal</p></li>
<li><p>Form the normalized SO(3) matrix <span class="math notranslate nohighlight">\(\mathbf{R} = [\hat{n}, \hat{o}, \hat{a}]\)</span></p></li>
</ol>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">trnorm</span><span class="p">,</span> <span class="n">troty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">linalg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">troty</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linalg</span><span class="o">.</span><span class="n">det</span><span class="p">(</span><span class="n">T</span><span class="p">[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span> <span class="c1"># is a valid SO(3)</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linalg</span><span class="o">.</span><span class="n">det</span><span class="p">(</span><span class="n">T</span><span class="p">[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>  <span class="c1"># not quite a valid SO(3) anymore</span>
<span class="go">-3.3306690738754696e-16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">trnorm</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linalg</span><span class="o">.</span><span class="n">det</span><span class="p">(</span><span class="n">T</span><span class="p">[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>  <span class="c1"># once more a valid SO(3)</span>
<span class="go">0.0</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Only the direction of a-vector (the z-axis) is unchanged.</p></li>
<li><p>Used to prevent finite word length arithmetic causing transforms to
become ‚Äòunnormalized‚Äô, ie. determinant <span class="math notranslate nohighlight">\(\ne 1\)</span>.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.trotx">
<span class="sig-name descname"><span class="pre">trotx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trotx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trotx" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create SE(3) pure rotation about X-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) ‚Äì rotation angle about X-axis</p></li>
<li><p><strong>unit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
<li><p><strong>t</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì 3D translation vector, defaults to [0,0,0]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trotx(Œ∏)</span></code> is a homogeneous transformation (4x4) representing a rotation
of Œ∏ radians about the x-axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trotx(Œ∏,</span> <span class="pre">'deg')</span></code> as above but Œ∏ is in degrees</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trotx(Œ∏,</span> <span class="pre">'rad',</span> <span class="pre">t=[x,y,z])</span></code> as above with translation of [x,y,z]</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">trotx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955,  0.    ],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trotx</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ,  1.    ],</span>
<span class="go">       [ 0.    ,  0.7071, -0.7071,  2.    ],</span>
<span class="go">       [ 0.    ,  0.7071,  0.7071,  3.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rotx" title="spatialmath.base.transforms3d.rotx"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotx()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.troty">
<span class="sig-name descname"><span class="pre">troty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#troty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.troty" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create SE(3) pure rotation about Y-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) ‚Äì rotation angle about Y-axis</p></li>
<li><p><strong>unit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
<li><p><strong>t</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì 3D translation vector, defaults to [0,0,0]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">troty(Œ∏)</span></code> is a homogeneous transformation (4x4) representing a rotation
of Œ∏ radians about the y-axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">troty(Œ∏,</span> <span class="pre">'deg')</span></code> as above but Œ∏ is in degrees</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">troty(Œ∏,</span> <span class="pre">'rad',</span> <span class="pre">t=[x,y,z])</span></code> as above with translation of [x,y,z]</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">troty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">troty</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9553,  0.    ,  0.2955,  0.    ],</span>
<span class="go">       [ 0.    ,  1.    ,  0.    ,  0.    ],</span>
<span class="go">       [-0.2955,  0.    ,  0.9553,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">troty</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="go">array([[ 0.7071,  0.    ,  0.7071,  1.    ],</span>
<span class="go">       [ 0.    ,  1.    ,  0.    ,  2.    ],</span>
<span class="go">       [-0.7071,  0.    ,  0.7071,  3.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.roty" title="spatialmath.base.transforms3d.roty"><code class="xref py py-func docutils literal notranslate"><span class="pre">roty()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.trotz">
<span class="sig-name descname"><span class="pre">trotz</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trotz"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trotz" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Create SE(3) pure rotation about Z-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) ‚Äì rotation angle about Z-axis</p></li>
<li><p><strong>unit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) ‚Äì angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p></li>
<li><p><strong>t</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì 3D translation vector, defaults to [0,0,0]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trotz(Œ∏)</span></code> is a homogeneous transformation (4x4) representing a rotation
of Œ∏ radians about the z-axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trotz(Œ∏,</span> <span class="pre">'deg')</span></code> as above but Œ∏ is in degrees</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trotz(Œ∏,</span> <span class="pre">'rad',</span> <span class="pre">t=[x,y,z])</span></code> as above with translation of [x,y,z]</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">trotz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trotz</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9553, -0.2955,  0.    ,  0.    ],</span>
<span class="go">       [ 0.2955,  0.9553,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  1.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trotz</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="go">array([[ 0.7071, -0.7071,  0.    ,  1.    ],</span>
<span class="go">       [ 0.7071,  0.7071,  0.    ,  2.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  1.    ,  3.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rotz" title="spatialmath.base.transforms3d.rotz"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotz()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.trplot">
<span class="sig-name descname"><span class="pre">trplot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'arrow'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'blue'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axislabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axissubscript</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">textcolor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('X',</span> <span class="pre">'Y',</span> <span class="pre">'Z')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">originsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origincolor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ortho'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anaglyph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wtl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-</span> <span class="pre">0.05,</span> <span class="pre">-</span> <span class="pre">0.05,</span> <span class="pre">-</span> <span class="pre">0.05)</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trplot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trplot" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Plot a 3D coordinate frame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>) or </em><em>an iterable returning same</em>) ‚Äì SE(3) or SO(3) matrix</p></li>
<li><p><strong>style</strong> (<em>str</em>) ‚Äì axis style: ‚Äòarrow‚Äô [default], ‚Äòline‚Äô, ‚Äòrgb‚Äô, ‚Äòrviz‚Äô (Rviz style)</p></li>
<li><p><strong>color</strong> (<em>str</em><em> or </em><em>list</em><em>(</em><em>3</em><em>) or </em><em>tuple</em><em>(</em><em>3</em><em>) </em><em>of str</em>) ‚Äì color of the lines defining the frame</p></li>
<li><p><strong>textcolor</strong> (<em>str</em>) ‚Äì color of text labels for the frame, default <code class="docutils literal notranslate"><span class="pre">color</span></code></p></li>
<li><p><strong>frame</strong> (<em>str</em>) ‚Äì label the frame, name is shown below the frame and as subscripts on the frame axis labels</p></li>
<li><p><strong>axislabel</strong> (<em>bool</em>) ‚Äì display labels on axes, default True</p></li>
<li><p><strong>axissubscript</strong> (<em>bool</em>) ‚Äì display subscripts on axis labels, default True</p></li>
<li><p><strong>labels</strong> (<em>3-tuple of strings</em>) ‚Äì labels for the axes, defaults to X, Y and Z</p></li>
<li><p><strong>length</strong> (<em>float</em><em> or </em><em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì length of coordinate frame axes, default 1</p></li>
<li><p><strong>originsize</strong> (<em>int</em>) ‚Äì size of dot to draw at the origin, 0 for no dot (default 20)</p></li>
<li><p><strong>origincolor</strong> (<em>str</em>) ‚Äì color of dot to draw at the origin, default is <code class="docutils literal notranslate"><span class="pre">color</span></code></p></li>
<li><p><strong>ax</strong> (<em>Axes3D reference</em>) ‚Äì the axes to plot into, defaults to current axes</p></li>
<li><p><strong>block</strong> (<em>bool</em>) ‚Äì run the GUI main loop until all windows are closed, default True</p></li>
<li><p><strong>dims</strong> (<em>array_like</em><em>(</em><em>6</em><em>) or </em><em>array_like</em><em>(</em><em>2</em><em>)</em>) ‚Äì dimension of plot volume as [xmin, xmax, ymin, ymax,zmin, zmax].
If dims is [min, max] those limits are applied to the x-, y- and z-axes.</p></li>
<li><p><strong>anaglyph</strong> (<em>bool</em><em>, </em><em>str</em><em> or </em><em>(</em><em>str</em><em>, </em><em>float</em><em>)</em>) ‚Äì 3D anaglyph display, if True use use red-cyan glasses.  To
set the color pass a string like <code class="docutils literal notranslate"><span class="pre">'gb'</span></code> for green-blue glasses. To set the
disparity (default 0.1) provide second argument in a tuple, eg. <code class="docutils literal notranslate"><span class="pre">('rc',</span> <span class="pre">0.2)</span></code>.
Bigger disparity exagerates the 3D ‚Äúpop out‚Äù effect.</p></li>
<li><p><strong>wtl</strong> (<em>float</em>) ‚Äì width-to-length ratio for arrows, default 0.2</p></li>
<li><p><strong>projection</strong> (<em>str</em>) ‚Äì 3D projection: ortho [default] or persp</p></li>
<li><p><strong>width</strong> (<em>float</em>) ‚Äì width of lines, default 1</p></li>
<li><p><strong>flo</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì frame label offset, a vector for frame label text string relative
to frame origin, default (-0.05, -0.05, -0.05)</p></li>
<li><p><strong>d2</strong> (<em>float</em>) ‚Äì distance of frame axis label text from origin, default 1.15</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>axes containing the frame</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Axes3DSubplot</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> ‚Äì bad arguments</p>
</dd>
</dl>
<p>Adds a 3D coordinate frame represented by the SO(3) or SE(3) matrix to the
current axes. If <code class="docutils literal notranslate"><span class="pre">T</span></code> is iterable then multiple frames will be drawn.</p>
<p>The appearance of the coordinate frame depends on many parameters:</p>
<ul>
<li><dl>
<dt>coordinate axes depend on:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">color</span></code> of axes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">width</span></code> of line</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">length</span></code> of line</p></li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">style</span></code> which is one of:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'arrow'</span></code> [default], draw line with arrow head in <code class="docutils literal notranslate"><span class="pre">color</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'line'</span></code>, draw line with no arrow head in <code class="docutils literal notranslate"><span class="pre">color</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'rgb'</span></code>, frame axes are lines with no arrow head and red for X, green</p></li>
</ul>
<p>for Y, blue for Z; no origin dot
- <code class="docutils literal notranslate"><span class="pre">'rviz'</span></code>, frame axes are thick lines with no arrow head and red for X,
green for Y, blue for Z; no origin dot</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl>
<dt>coordinate axis labels depend on:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">axislabel</span></code> if True [default] label the axis, default labels are X, Y, Z</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">labels</span></code> 3-list of alternative axis labels</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">textcolor</span></code> which defaults to <code class="docutils literal notranslate"><span class="pre">color</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">axissubscript</span></code> if True [default] add the frame label <code class="docutils literal notranslate"><span class="pre">frame</span></code> as a subscript</p></li>
</ul>
<p>for each axis label</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>coordinate frame label depends on:</dt><dd><ul class="simple">
<li><p><cite>frame</cite> the label placed inside {} near the origin of the frame</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>a dot at the origin</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">originsize</span></code> size of the dot, if zero no dot</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">origincolor</span></code> color of the dot, defaults to <code class="docutils literal notranslate"><span class="pre">color</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">trplot</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
<span class="n">trplot</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
<span class="n">trplot</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="s1">&#39;labels&#39;</span><span class="p">,</span> <span class="s1">&#39;UVW&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//func_3d-1.py">Source code</a>, <a class="reference external" href=".//func_3d-1.png">png</a>, <a class="reference external" href=".//func_3d-1.hires.png">hires.png</a>, <a class="reference external" href=".//func_3d-1.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="_images/func_3d-1.png" class="plot-directive" src="_images/func_3d-1.png" />
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">axes</span></code> is specified the plot is drawn there, otherwise:
- it will draw in the current figure (as given by <code class="docutils literal notranslate"><span class="pre">gca()</span></code>)
- if no axes in the current figure, it will create a 3D axes
- if no current figure, it will create one, and a 3D axes</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">width</span></code> can be set in the <code class="docutils literal notranslate"><span class="pre">rgb</span></code> or <code class="docutils literal notranslate"><span class="pre">rviz</span></code> styles to override the
defaults which are 1 and 8 respectively.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">anaglyph</span></code> effect is induced by drawing two versions of the
frame in different colors: one that corresponds to lens over the left
eye and one to the lens over the right eye. The view for the right eye
is from a view point shifted in the positive x-direction.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The origin is normally indicated with a marker of the same color
as the frame.  The default size is 20. This can be disabled by setting
its size to zero by <code class="docutils literal notranslate"><span class="pre">originsize=0</span></code>.  For <code class="docutils literal notranslate"><span class="pre">'rgb'</span></code> style the default is 0
but it can be set explicitly, and the color is as per the <code class="docutils literal notranslate"><span class="pre">color</span></code>
option.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>not supported</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#spatialmath.base.transforms3d.tranimate" title="spatialmath.base.transforms3d.tranimate"><code class="xref py py-func docutils literal notranslate"><span class="pre">tranimate()</span></code></a> <code class="xref py py-func docutils literal notranslate"><span class="pre">plotvol3()</span></code> <code class="xref py py-func docutils literal notranslate"><span class="pre">axes_logic()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.trprint">
<span class="sig-name descname"><span class="pre">trprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orient='rpy/zyx'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='UTF-8'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt='{:.3g}'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">degsym=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit='deg'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trprint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trprint" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><blockquote>
<div><p>Compact display of SO(3) or SE(3) matrices</p>
<dl class="field-list simple">
<dt class="field-odd">param T</dt>
<dd class="field-odd"><p>SE(3) or SO(3) matrix</p>
</dd>
<dt class="field-even">type T</dt>
<dd class="field-even"><p>ndarray(4,4) or ndarray(3,3)</p>
</dd>
<dt class="field-odd">param label</dt>
<dd class="field-odd"><p>text label to put at start of line</p>
</dd>
<dt class="field-even">type label</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">param orient</dt>
<dd class="field-odd"><p>3-angle convention to use</p>
</dd>
<dt class="field-even">type orient</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">param file</dt>
<dd class="field-odd"><p>file to write formatted string to. [default, stdout]</p>
</dd>
<dt class="field-even">type file</dt>
<dd class="field-even"><p>file object</p>
</dd>
<dt class="field-odd">param fmt</dt>
<dd class="field-odd"><p>conversion format for each number in the format used with <code class="docutils literal notranslate"><span class="pre">format</span></code></p>
</dd>
<dt class="field-even">type fmt</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">param unit</dt>
<dd class="field-odd"><p>angular units: ‚Äòrad‚Äô [default], or ‚Äòdeg‚Äô</p>
</dd>
<dt class="field-even">type unit</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">return</dt>
<dd class="field-odd"><p>formatted string</p>
</dd>
<dt class="field-even">rtype</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">raises ValueError</dt>
<dd class="field-odd"><p>bad argument</p>
</dd>
</dl>
<p>The matrix is formatted and written to <code class="docutils literal notranslate"><span class="pre">file</span></code> and the
string is returned.  To suppress writing to a file, set <code class="docutils literal notranslate"><span class="pre">file=None</span></code>.</p>
</div></blockquote>
<ul>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">trprint(R)</span></code> prints the SO(3) rotation matrix to stdout in a compact</dt><dd><p>single-line format:</p>
<blockquote>
<div><p>[LABEL:] ORIENTATION UNIT</p>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">trprint(T)</span></code> prints the SE(3) homogoneous transform to stdout in a
compact single-line format:</p>
<blockquote>
<div><p>[LABEL:] [t=X, Y, Z;] ORIENTATION UNIT</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">trprint(X,</span> <span class="pre">file=None)</span></code> as above but returns the string rather than
printing to a file</p></li>
</ul>
<p>Orientation is expressed in one of several formats:</p>
<ul class="simple">
<li><p>‚Äòrpy/zyx‚Äô roll-pitch-yaw angles in ZYX axis order [default]</p></li>
<li><p>‚Äòrpy/yxz‚Äô roll-pitch-yaw angles in YXZ axis order</p></li>
<li><p>‚Äòrpy/zyx‚Äô roll-pitch-yaw angles in ZYX axis order</p></li>
<li><p>‚Äòeul‚Äô Euler angles in ZYZ axis order</p></li>
<li><p>‚Äòangvec‚Äô angle and axis</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">transl</span><span class="p">,</span> <span class="n">rpy2tr</span><span class="p">,</span> <span class="n">trprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">transl</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="o">@</span> <span class="n">rpy2tr</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trprint</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&#39;t = 1, 2, 3; rpy/zyx = 10¬∞, 20¬∞, 30¬∞&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trprint</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;angvec&#39;</span><span class="p">)</span>
<span class="go">&#39;T: t = 1, 2, 3; angvec = (35.8¬∞ | 0.124, 0.616, 0.778)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trprint</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;angvec&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{:8.4g}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">&#39;T: t =        1,        2,        3; angvec = (   35.82¬∞ |    0.124,   0.6156,   0.7782)&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If the ‚Äòrpy‚Äô option is selected, then the particular angle sequence can be
specified with the options ‚Äòxyz‚Äô or ‚Äòyxz‚Äô which are passed through to <code class="docutils literal notranslate"><span class="pre">tr2rpy</span></code>.
‚Äòzyx‚Äô is the default.</p></li>
<li><p>Default formatting is for compact display of data</p></li>
<li><p>For tabular data set <code class="docutils literal notranslate"><span class="pre">fmt</span></code> to a fixed width format such as
<code class="docutils literal notranslate"><span class="pre">fmt='{:.3g}'</span></code></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="func_2d.html#spatialmath.base.transforms2d.trprint2" title="spatialmath.base.transforms2d.trprint2"><code class="xref py py-func docutils literal notranslate"><span class="pre">trprint2()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2eul" title="spatialmath.base.transforms3d.tr2eul"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2eul()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2rpy" title="spatialmath.base.transforms3d.tr2rpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2rpy()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.x2r">
<span class="sig-name descname"><span class="pre">x2r</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rpy/xyz'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#x2r"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.x2r" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Convert angular representation to SO(3) matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) ‚Äì angular representation</p></li>
<li><p><strong>representation</strong> (<em>str</em><em>, </em><em>optional</em>) ‚Äì rotational representation, defaults to ‚Äúrpy/xyz‚Äù</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<p>Convert a minimal rotational representation <span class="math notranslate nohighlight">\(\vec{\Gamma} \in
\mathbb{R}^3\)</span> to an SO(3) rotation matrix.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">representation</span></code></p></th>
<th class="head"><p>Rotational representation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/xyz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;arm&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order (default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/zyx&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;vehicle&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/yxz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;camera&quot;</span></code></p></td>
<td><p>RPY angular rates in YXZ order</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;eul&quot;</span></code></p></td>
<td><p>Euler angular rates in ZYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;exp&quot;</span></code></p></td>
<td><p>exponential coordinate rates</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#spatialmath.base.transforms3d.r2x" title="spatialmath.base.transforms3d.r2x"><code class="xref py py-func docutils literal notranslate"><span class="pre">r2x()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2r" title="spatialmath.base.transforms3d.rpy2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.eul2r" title="spatialmath.base.transforms3d.eul2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2r()</span></code></a> <a class="reference internal" href="#spatialmath.base.transforms3d.trexp" title="spatialmath.base.transforms3d.trexp"><code class="xref py py-func docutils literal notranslate"><span class="pre">trexp()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spatialmath.base.transforms3d.x2tr">
<span class="sig-name descname"><span class="pre">x2tr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rpy/xyz'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#x2tr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spatialmath.base.transforms3d.x2tr" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Convert analytic representation to SE(3)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>array_like</em><em>(</em><em>6</em><em>)</em>) ‚Äì analytic vector representation</p></li>
<li><p><strong>representation</strong> (<em>str</em><em>, </em><em>optional</em>) ‚Äì angular representation to use, defaults to ‚Äúrpy/xyz‚Äù</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>pose as an SE(3) matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<p>Convert a vector representation of pose <span class="math notranslate nohighlight">\(\vec{x} = (\vec{t},\vec{r})
\in \mathbb{R}^6\)</span> to SE(3), where rotation <span class="math notranslate nohighlight">\(\vec{r} \in \mathbb{R}^3\)</span> is encoded
in a minimal representation to an equivalent SE(3) matrix.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">representation</span></code></p></th>
<th class="head"><p>Rotational representation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/xyz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;arm&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order (default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/zyx&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;vehicle&quot;</span></code></p></td>
<td><p>RPY angular rates in XYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rpy/yxz&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;camera&quot;</span></code></p></td>
<td><p>RPY angular rates in YXZ order</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;eul&quot;</span></code></p></td>
<td><p>Euler angular rates in ZYZ order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;exp&quot;</span></code></p></td>
<td><p>exponential coordinate rates</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#spatialmath.base.transforms3d.r2x" title="spatialmath.base.transforms3d.r2x"><code class="xref py py-func docutils literal notranslate"><span class="pre">r2x()</span></code></a></p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="func_2d.html" class="btn btn-neutral float-left" title="Transforms in 2D" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="func_nd.html" class="btn btn-neutral float-right" title="Transforms in ND" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-, Peter Corke..
      <span class="lastupdated">Last updated on 21-Mar-2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-11Q6WJM565"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-11Q6WJM565', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>